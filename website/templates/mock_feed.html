{% extends "base.html" %}

{% block div %}
<div class="feed-container">
  <!-- Search section -->
  <div class="search-section">
    <form class="search-form" method="GET" action="{{ url_for('views.mock_feed') }}">
      <div class="search-input-wrapper">
        <i class="fas fa-search"></i>
        <input type="text" class="search-input" name="search" placeholder="Search for professionals or services..." value="{{ search }}">
      </div>
      <div class="search-input-wrapper">
        <i class="fas fa-map-marker-alt"></i>
        <input type="text" class="search-input" name="location" placeholder="Filter by location" value="{{ location }}">
      </div>
      <button type="submit" class="search-button">Search</button>
    </form>
    
    {% if search or location %}
    <div class="results-info">
      <div class="results-text">
        Showing results {% if search %}for "{{ search }}"{% endif %}
        {% if search and location %}and{% endif %}
        {% if location %}in "{{ location }}"{% endif %}
      </div>
      <a href="{{ url_for('views.mock_feed') }}" class="clear-search">Clear search</a>
    </div>
    {% endif %}
  </div>
  
  <!-- No results message -->
  {% if professionals|length == 0 %}
  <div class="no-results">
    <i class="fas fa-search"></i>
    <h3>No professionals found</h3>
    <p>Try adjusting your search criteria</p>
    <a href="{{ url_for('views.mock_feed') }}">View all professionals</a>
  </div>
  {% endif %}
  
  <!-- Professional cards -->
  {% for pro in professionals %}
 <div class="pro-card">
    <div class="pro-header">
      <img 
        src="{{ url_for('static', filename=pro.Image) if pro.Image else url_for('static', filename='assets/defaultPP.png') }}"
        alt="{{ pro.Name }}"
        class="pro-avatar"
        onerror="this.onerror=null; this.src='{{ url_for('static', filename='assets/defaultPP.png') }}';"
      >

      <div class="pro-title">
        <h3 class="pro-name">{{ pro.Name }} {{ pro.Surname }}</h3>
        {% if pro.user_type == 'certifiedPro' %}
    üéì
  {% elif pro.user_type == 'experiencedPro' %}
    ‚≠ê
  {% endif %}
        <p class="pro-role">{{ pro.Service }}</p>
        <div class="pro-rating">
          <i class="fas fa-star"></i> {{ pro.Rating|round(1) }}
          <span>({{ pro.Reviews }} reviews)</span>
        </div>
      </div>
    </div>
    
    <div class="pro-body">
      {% if pro.Bio %}
      <p class="pro-bio">{{ pro.Bio }}</p>
      {% endif %}
      
      <div class="pro-details">
        <div class="detail-item">
          <i class="fas fa-map-marker-alt"></i>
          <span>{{ pro.Location }}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-briefcase"></i>
          <span>Experience: {{ pro.Experience }}</span>
        </div>
        <div class="detail-item">
          <i class="fas fa-clock"></i>
          <span>Available: {{ pro.availability }}</span>
        </div>
      </div>
    </div>
    
    <div class="pro-actions">
      <a href="{{ url_for('views.profile', user_id=pro.ID) }}" class="profile-btn">View Profile</a>
      <button class="connect-btn">Connect</button>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}