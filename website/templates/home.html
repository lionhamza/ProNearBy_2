{% extends "base.html" %}

{% block title %}Home - ProNearBy{% endblock %}

{% block div %}
<div class="main-layout">
  <!-- Sidebar -->
  <aside class="sidebar">
    <img src="{{ url_for('static', filename='assets/electrician.jpg') }}" alt="Profile Picture" class="profile-pic" />
    <h2 class="username">John Doe</h2>
    <p class="role">Electrician</p>
    <p class="bio">⚡ Helping homes stay bright and safe</p>

    <hr class="sidebar-divider" />

   
    <p><strong>Experience:</strong> 5+ years</p>
    
    <p><strong>Availability:</strong> Mon–Fri, 8am–5pm</p>
    <p><strong>Rating:</strong> ⭐ 4.7 (88 reviews)</p>

    <hr class="sidebar-divider" />

    <a href="{{ url_for('views.profile', user_id=user.ID) }}" class="view-profile-btn">View Profile</a>

    <a href="{{ url_for('views.mock_feed') }}" class="browse-pros-btn">
      <i class="fas fa-stream"></i> Browse Professionals
    </a>
  </aside>

  <!-- Cards -->
  <section class="content-section">
    <!-- Example of a single card -->
    <div class="apost">
  {% for post in posts %}
  {% set post_user = post.user %}
  <div class="post-card">
    <div class="post-header">
      <img src="{{ url_for('static', filename=user.Image or 'assets/electrician.jpg') }}" class="post-profile-pic" alt="User Pic">
      <div class="post-user-info">
        <strong>{{ user.Name }} {{ user.Surname }}</strong>
        <span class="post-timestamp">{{ post.timestamp.strftime('%b %d, %Y %H:%M') }}</span>
      </div>
      <div class="post-options">⋮</div>
    </div>

    <div class="post-body">
      <p>{{ post.content }}</p>
      {% if post.media %}
       {% for file in post.media %}
       {% if file.endswith(('.png', '.jpg', '.jpeg', '.gif')) %}
        <img src="{{ url_for('static', filename=file) }}" class="post-img" alt="Image">
        {% elif file.endswith(('.mp4', '.mov', '.avi')) %}
         <video controls class="post-img">
          <source src="{{ url_for('static', filename=file) }}" type="video/mp4">
          Your browser does not support the video tag.
         </video>
       {% endif %}
      {% endfor %}
     {% endif %}
</div>

    <div class="post-actions">
      <button class="post-btn">❤️ Like</button>
    </div>
  </div>
  {% endfor %}
</div>

    <!-- Copy the above div and change content for more cards -->
  </section>
</div>
{% endblock %}